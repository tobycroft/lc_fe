import{g as E}from"./ak.f9236663.js";import{e as P,u as h,l as A,T as f,f as m,_ as R,r as g,o as v,c as O,g as _,a as c,w as u,h as C,v as S,t as I,d as t,p as k,i as b}from"./index.8e26e5ab.js";const y=async n=>await P("https://api.lc.familyeducation.org.cn/v1/user/auth/phone",n),U=async n=>await P("https://api.lc.familyeducation.org.cn/v1/user/auth/send",n);function N(){const n=h(),o=async(e,p)=>await y({phone:e,code:p}),a=e=>{const p=/^[1][3-9][\d]{9}/;return e?p.test(e)||f("\u624B\u673A\u53F7\u683C\u5F0F\u4E0D\u6B63\u786E"):f("\u8BF7\u8F93\u5165\u624B\u673A\u53F7"),p.test(e)},i=A();return{onSubmit:async e=>{if(console.log("submit",e),!a(e.phone))return;const p=await o(e.phone,e.code);i.getLoginInfo(p.token,p.uid).then(r=>{n.push({path:"/basicInformation"})})}}}function T(n){const o=m(60),a=m(!1),i=async()=>{const e={phone:n.value};console.log(e),await U(e)};return{sendTime:o,isSend:a,handleSendCode:async()=>{await i(),a.value=!0;const e=setInterval(()=>{o.value--,o.value<=0&&(a.value=!1,o.value=0,clearTimeout(e))},1e3)}}}const w={setup(){const n=m(""),o=m(""),{onSubmit:a}=N();return{getImgUrl:E,phoneRef:n,codeRef:o,onSubmit:a,...T(n)}}},D=n=>(k("data-v-c9525c86"),n=n(),b(),n),M={class:"flex-column root"},F=["src"],L={class:"field-wrap"},x={class:"flex"},G=D(()=>_("span",null,"+86",-1)),H=["src"],W={class:"field-wrap"},V={style:{"margin-top":"40px"}},j=D(()=>_("p",{class:"note"},[t(" \u767B\u5F55\u5373\u4EE3\u8868\u60A8\u540C\u610F "),_("span",{class:"red-char"},"\u300A\u7528\u6237\u4F7F\u7528\u534F\u8BAE\u300B"),t("\u548C "),_("span",{class:"red-char"},"\u300A\u9690\u79C1\u534F\u8BAE\u300B")],-1)),z={class:"circle-box"},B=["src"],J=["src"],X=["src"];function Z(n,o,a,i,d,e){const p=g("van-field"),r=g("van-button"),l=g("van-form");return v(),O("div",M,[_("img",{class:"img_happy",src:i.getImgUrl("login_img_happy.png"),alt:""},null,8,F),c(l,{class:"form-wrap",onSubmit:i.onSubmit},{default:u(()=>[_("div",L,[_("div",x,[G,_("img",{class:"arr-icon",src:i.getImgUrl("login_filed_arr.png"),alt:""},null,8,H)]),c(p,{class:"phoneRef-field",modelValue:i.phoneRef,"onUpdate:modelValue":o[0]||(o[0]=s=>i.phoneRef=s),name:"phone",placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7"},null,8,["modelValue"])]),_("div",W,[c(p,{class:"phoneRef-field",modelValue:i.codeRef,"onUpdate:modelValue":o[1]||(o[1]=s=>i.codeRef=s),name:"code",placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"},null,8,["modelValue"]),C(_("span",{class:"send-code",onClick:o[2]||(o[2]=(...s)=>n.handleSendCode&&n.handleSendCode(...s))},"\u83B7\u53D6\u9A8C\u8BC1\u7801",512),[[S,!n.isSend]]),C(_("span",{class:"send-code grey"},"\u5DF2\u53D1\u9001\uFF08"+I(n.sendTime)+"s\uFF09",513),[[S,n.isSend]])]),_("div",V,[c(r,{round:"",block:"",class:"btn-submit",type:"primary","native-type":"submit"},{default:u(()=>[t(" \u4E0B\u4E00\u6B65 ")]),_:1})])]),_:1},8,["onSubmit"]),j,_("div",z,[_("img",{class:"cic-img",src:i.getImgUrl("login_img_circle.png"),alt:""},null,8,B),_("img",{class:"char-img",src:i.getImgUrl("login_bottom_char.png"),alt:""},null,8,J),_("img",{class:"c-bottom",src:i.getImgUrl("login_img_circle.png"),alt:""},null,8,X)])])}const q=R(w,[["render",Z],["__scopeId","data-v-c9525c86"]]);export{q as default};
