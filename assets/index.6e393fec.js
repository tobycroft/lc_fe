import{g as I}from"./ak.5795e222.js";import{j as u,u as R,l as M,e as C,g as T,f,T as S,r as d,_ as N,a as g,o as U,c as F,b as s,d as t,k as E,m as P,w as A,v as D,t as L,p as y,i as h}from"./index.30d2042b.js";const k=async o=>await u("https://api.lc.familyeducation.org.cn/v1/user/auth/phone",o),b=async o=>await u("https://api.lc.familyeducation.org.cn/v1/user/auth/send",o);function V(){const o=R(),e=async(a,_)=>await k({phone:a,code:_}),p=async()=>await T(),n=async a=>await f({url:a}),c=a=>{const _=/^[1][3-9][\d]{9}/;return a?_.test(a)||S("\u624B\u673A\u53F7\u683C\u5F0F\u4E0D\u6B63\u786E"):S("\u8BF7\u8F93\u5165\u624B\u673A\u53F7"),_.test(a)},r=M();return{onSubmit:async a=>{if(console.log("submit",a),!c(a.phone))return;const _=await e(a.phone,a.code);r.getLoginInfo(_.token,_.uid).then(async l=>{const i=await p();i.wx_id&&C().setWxId(i.wx_id),C().userInfo.wx_id?(console.log(o),o.push({path:"/basicInformation"})):n("https://lc.familyeducation.org.cn/#/basicInformation").then(v=>{window.location.href=v})})}}}function w(o){const e=d(60),p=d(!1),n=async()=>{const r={phone:o.value};console.log(r),await b(r)};return{sendTime:e,isSend:p,handleSendCode:async()=>{await n(),p.value=!0;const r=setInterval(()=>{e.value--,e.value<=0&&(p.value=!1,e.value=0,clearTimeout(r))},1e3)}}}const W={setup(){const o=R(),e=d(""),p=d(""),n=d(!1),c=()=>{o.push({path:"/privacyPolicy"})},r=()=>{o.push({path:"/userAgreement"})},{onSubmit:m}=V();return{toPrivacyPolicy:c,toUserAgreement:r,checked:n,getImgUrl:I,phoneRef:e,codeRef:p,onSubmit:m,...w(e)}}},O=o=>(y("data-v-8444383e"),o=o(),h(),o),x={class:"flex-column root"},G=O(()=>s("div",{class:"title"},"\u664B\u6C5F\u5E02\u65B0\u664B\u5BB6\u5EAD\u80FD\u529B\u4FC3\u8FDB\u5E73\u53F0",-1)),H=["src"],j={class:"field-wrap"},K={class:"flex"},B=O(()=>s("span",null,"+86",-1)),X=["src"],Y={class:"field-wrap"},J={style:{"margin-top":"40px"}},Q={class:"note"},Z={class:"circle-box"},q=["src"],$=["src"],z=["src"];function ee(o,e,p,n,c,r){const m=g("van-field"),a=g("van-button"),_=g("van-form"),l=g("van-checkbox");return U(),F("div",x,[s("header",null,[G,s("img",{class:"img_happy",src:n.getImgUrl("login_img_happy.png"),alt:""},null,8,H)]),t(_,{class:"form-wrap",onSubmit:n.onSubmit},{default:E(()=>[s("div",j,[s("div",K,[B,s("img",{class:"arr-icon",src:n.getImgUrl("login_filed_arr.png"),alt:""},null,8,X)]),t(m,{class:"phoneRef-field",modelValue:n.phoneRef,"onUpdate:modelValue":e[0]||(e[0]=i=>n.phoneRef=i),name:"phone",placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7"},null,8,["modelValue"])]),s("div",Y,[t(m,{class:"phoneRef-field",modelValue:n.codeRef,"onUpdate:modelValue":e[1]||(e[1]=i=>n.codeRef=i),name:"code",placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"},null,8,["modelValue"]),A(s("span",{class:"send-code",onClick:e[2]||(e[2]=(...i)=>o.handleSendCode&&o.handleSendCode(...i))},"\u83B7\u53D6\u9A8C\u8BC1\u7801",512),[[D,!o.isSend]]),A(s("span",{class:"send-code grey"},"\u5DF2\u53D1\u9001\uFF08"+L(o.sendTime)+"s\uFF09",513),[[D,o.isSend]])]),s("div",J,[t(a,{round:"",block:"",class:"btn-submit",type:"primary","native-type":"submit"},{default:E(()=>[P(" \u4E0B\u4E00\u6B65 ")]),_:1})])]),_:1},8,["onSubmit"]),s("p",Q,[t(l,{class:"check",modelValue:n.checked,"onUpdate:modelValue":e[3]||(e[3]=i=>n.checked=i),shape:"square"},null,8,["modelValue"]),P(" \u767B\u5F55\u5373\u4EE3\u8868\u60A8\u540C\u610F "),s("span",{class:"red-char",onClick:e[4]||(e[4]=(...i)=>n.toUserAgreement&&n.toUserAgreement(...i))},"\u300A\u7528\u6237\u4F7F\u7528\u534F\u8BAE\u300B"),P("\u548C "),s("span",{class:"red-char",onClick:e[5]||(e[5]=(...i)=>n.toPrivacyPolicy&&n.toPrivacyPolicy(...i))},"\u300A\u9690\u79C1\u534F\u8BAE\u300B")]),s("div",Z,[s("img",{class:"cic-img",src:n.getImgUrl("login_img_circle.png"),alt:""},null,8,q),s("img",{class:"char-img",src:n.getImgUrl("login_bottom_char.png"),alt:""},null,8,$),s("img",{class:"c-bottom",src:n.getImgUrl("login_img_circle.png"),alt:""},null,8,z)])])}const ae=N(W,[["render",ee],["__scopeId","data-v-8444383e"]]);export{ae as default};
