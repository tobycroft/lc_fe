import{g as O}from"./ak.f9236663.js";import{e as E,u as R,l as A,T as S,f as _,_ as I,r as d,o as M,c as N,g as s,a as m,w as C,h as g,v as D,t as T,d as p,p as F,i as h}from"./index.99f668ec.js";const v=async e=>await E("https://api.lc.familyeducation.org.cn/v1/user/auth/phone",e),U=async e=>await E("https://api.lc.familyeducation.org.cn/v1/user/auth/send",e);function f(){const e=R(),n=async(o,i)=>await v({phone:o,code:i}),a=o=>{const i=/^[1][3-9][\d]{9}/;return o?i.test(o)||S("\u624B\u673A\u53F7\u683C\u5F0F\u4E0D\u6B63\u786E"):S("\u8BF7\u8F93\u5165\u624B\u673A\u53F7"),i.test(o)},r=A();return{onSubmit:async o=>{if(console.log("submit",o),!a(o.phone))return;const i=await n(o.phone,o.code);r.getLoginInfo(i.token,i.uid).then(l=>{e.push({path:"/basicInformation"})})}}}function y(e){const n=_(60),a=_(!1),r=async()=>{const o={phone:e.value};console.log(o),await U(o)};return{sendTime:n,isSend:a,handleSendCode:async()=>{await r(),a.value=!0;const o=setInterval(()=>{n.value--,n.value<=0&&(a.value=!1,n.value=0,clearTimeout(o))},1e3)}}}const W={setup(){const e=_(""),n=_(""),{onSubmit:a}=f();return{getImgUrl:O,phoneRef:e,codeRef:n,onSubmit:a,...y(e)}}},u=e=>(F("data-v-c9525c86"),e=e(),h(),e),L={class:"flex-column root"},b=["src"],V={class:"field-wrap"},j={class:"flex"},x=u(()=>s("span",null,"+86",-1)),q=["src"],w={class:"field-wrap"},G={style:{"margin-top":"40px"}},K=u(()=>s("p",{class:"note"},[p(" \u767B\u5F55\u5373\u4EE3\u8868\u60A8\u540C\u610F "),s("span",{class:"red-char"},"\u300A\u7528\u6237\u4F7F\u7528\u534F\u8BAE\u300B"),p("\u548C "),s("span",{class:"red-char"},"\u300A\u9690\u79C1\u534F\u8BAE\u300B")],-1)),H={class:"circle-box"},k=["src"],X=["src"],B=["src"];function J(e,n,a,r,c,o){const i=d("van-field"),l=d("van-button"),P=d("van-form");return M(),N("div",L,[s("img",{class:"img_happy",src:r.getImgUrl("login_img_happy.png"),alt:""},null,8,b),m(P,{class:"form-wrap",onSubmit:r.onSubmit},{default:C(()=>[s("div",V,[s("div",j,[x,s("img",{class:"arr-icon",src:r.getImgUrl("login_filed_arr.png"),alt:""},null,8,q)]),m(i,{class:"phoneRef-field",modelValue:r.phoneRef,"onUpdate:modelValue":n[0]||(n[0]=t=>r.phoneRef=t),name:"phone",placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7"},null,8,["modelValue"])]),s("div",w,[m(i,{class:"phoneRef-field",modelValue:r.codeRef,"onUpdate:modelValue":n[1]||(n[1]=t=>r.codeRef=t),name:"code",placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"},null,8,["modelValue"]),g(s("span",{class:"send-code",onClick:n[2]||(n[2]=(...t)=>e.handleSendCode&&e.handleSendCode(...t))},"\u83B7\u53D6\u9A8C\u8BC1\u7801",512),[[D,!e.isSend]]),g(s("span",{class:"send-code grey"},"\u5DF2\u53D1\u9001\uFF08"+T(e.sendTime)+"s\uFF09",513),[[D,e.isSend]])]),s("div",G,[m(l,{round:"",block:"",class:"btn-submit",type:"primary","native-type":"submit"},{default:C(()=>[p(" \u4E0B\u4E00\u6B65 ")]),_:1})])]),_:1},8,["onSubmit"]),K,s("div",H,[s("img",{class:"cic-img",src:r.getImgUrl("login_img_circle.png"),alt:""},null,8,k),s("img",{class:"char-img",src:r.getImgUrl("login_bottom_char.png"),alt:""},null,8,X),s("img",{class:"c-bottom",src:r.getImgUrl("login_img_circle.png"),alt:""},null,8,B)])])}const $=I(W,[["render",J],["__scopeId","data-v-c9525c86"]]);export{$ as default};
