import{g as I}from"./ak.2492a013.js";import{j as A,u as R,l as T,e as S,g as N,f as M,T as C,r as d,_ as F,a as g,o as f,c as U,b as o,d as c,k as D,m as P,w as u,v as E,t as h,p as y,i as b}from"./index.e7bfcabe.js";const k=async s=>await A("https://api.lc.familyeducation.org.cn/v1/user/auth/phone",s),W=async s=>await A("https://api.lc.familyeducation.org.cn/v1/user/auth/send",s);function L(){const s=R(),e=async(i,_)=>await k({phone:i,code:_}),t=async()=>await N(),n=async i=>await M({url:i}),p=i=>{const _=/^[1][3-9][\d]{9}/;return i?_.test(i)||C("\u624B\u673A\u53F7\u683C\u5F0F\u4E0D\u6B63\u786E"):C("\u8BF7\u8F93\u5165\u624B\u673A\u53F7"),_.test(i)},r=T();return{onSubmit:async i=>{if(console.log("submit",i),!p(i.phone))return;const _=await e(i.phone,i.code);r.getLoginInfo(_.token,_.uid).then(async l=>{const a=await t();a.wx_id&&S().setWxId(a.wx_id),S().userInfo.wx_id?(console.log(s),s.push({path:"/basicInformation"})):n("https://lc.familyeducation.org.cn/#/basicInformation").then(v=>{window.location.href=v})})}}}function V(s){const e=d(60),t=d(!1),n=async()=>{const r={phone:s.value};console.log(r),await W(r)};return{sendTime:e,isSend:t,handleSendCode:async()=>{await n(),t.value=!0;const r=setInterval(()=>{e.value--,e.value<=0&&(t.value=!1,e.value=0,clearTimeout(r))},1e3)}}}const x={setup(){const s=R(),e=d(""),t=d(""),n=d(!1),p=()=>{s.push({path:"/privacyPolicy"})},r=()=>{s.push({path:"/userAgreement"})},{onSubmit:m}=L();return{toPrivacyPolicy:p,toUserAgreement:r,checked:n,getImgUrl:I,phoneRef:e,codeRef:t,onSubmit:m,...V(e)}}},O=s=>(y("data-v-3099f89d"),s=s(),b(),s),w={class:"flex-column root"},q=O(()=>o("div",{class:"title"},"\u664B\u6C5F\u5E02\u65B0\u664B\u5BB6\u5EAD\u80FD\u529B\u4FC3\u8FDB\u5E73\u53F0",-1)),G=["src"],j={class:"field-wrap"},K={class:"flex"},H=O(()=>o("span",null,"+86",-1)),B=["src"],X={class:"field-wrap"},Y={style:{"margin-top":"40px"}},J={class:"note"},z={class:"circle-box"},$=["src"],Q=["src"],Z=["src"];function ee(s,e,t,n,p,r){const m=g("van-field"),i=g("van-button"),_=g("van-form"),l=g("van-checkbox");return f(),U("div",w,[o("header",null,[q,o("img",{class:"img_happy",src:n.getImgUrl("login_img_happy.png"),alt:""},null,8,G)]),c(_,{class:"form-wrap",onSubmit:n.onSubmit},{default:D(()=>[o("div",j,[o("div",K,[H,o("img",{class:"arr-icon",src:n.getImgUrl("login_filed_arr.png"),alt:""},null,8,B)]),c(m,{class:"phoneRef-field",modelValue:n.phoneRef,"onUpdate:modelValue":e[0]||(e[0]=a=>n.phoneRef=a),name:"phone",placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7"},null,8,["modelValue"])]),o("div",X,[c(m,{class:"phoneRef-field",modelValue:n.codeRef,"onUpdate:modelValue":e[1]||(e[1]=a=>n.codeRef=a),name:"code",placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"},null,8,["modelValue"]),u(o("span",{class:"send-code",onClick:e[2]||(e[2]=(...a)=>s.handleSendCode&&s.handleSendCode(...a))},"\u83B7\u53D6\u9A8C\u8BC1\u7801",512),[[E,!s.isSend]]),u(o("span",{class:"send-code grey"},"\u5DF2\u53D1\u9001\uFF08"+h(s.sendTime)+"s\uFF09",513),[[E,s.isSend]])]),o("div",Y,[c(i,{round:"",block:"",class:"btn-submit",type:"primary","native-type":"submit"},{default:D(()=>[P(" \u4E0B\u4E00\u6B65 ")]),_:1})])]),_:1},8,["onSubmit"]),o("p",J,[c(l,{class:"check",modelValue:n.checked,"onUpdate:modelValue":e[3]||(e[3]=a=>n.checked=a),shape:"square"},null,8,["modelValue"]),P(" \u767B\u5F55\u5373\u4EE3\u8868\u60A8\u540C\u610F "),o("span",{class:"red-char",onClick:e[4]||(e[4]=(...a)=>n.toUserAgreement&&n.toUserAgreement(...a))},"\u300A\u7528\u6237\u4F7F\u7528\u534F\u8BAE\u300B"),P("\u548C "),o("span",{class:"red-char",onClick:e[5]||(e[5]=(...a)=>n.toPrivacyPolicy&&n.toPrivacyPolicy(...a))},"\u300A\u9690\u79C1\u534F\u8BAE\u300B")]),o("div",z,[o("img",{class:"cic-img",src:n.getImgUrl("login_img_circle.png"),alt:""},null,8,$),o("img",{class:"char-img",src:n.getImgUrl("login_bottom_char.png"),alt:""},null,8,Q),o("img",{class:"c-bottom",src:n.getImgUrl("login_img_circle.png"),alt:""},null,8,Z)])])}const ie=F(x,[["render",ee],["__scopeId","data-v-3099f89d"]]);export{ie as default};
